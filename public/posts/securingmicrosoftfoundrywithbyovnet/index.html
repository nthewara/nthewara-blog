<!doctype html>
<html
  lang="en"
  dir="ltr"
  class="scroll-smooth"
  data-default-appearance="light"
  data-auto-appearance="true"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
  
    <meta http-equiv="content-language" content="en">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="theme-color">

  
  <title>Securing Microsoft Foundry with Bring Your Own VNET &middot; Cloud & AI Platforms Blog</title>
    <meta name="title" content="Securing Microsoft Foundry with Bring Your Own VNET &middot; Cloud & AI Platforms Blog">

  
  
  
  
  
  <link rel="canonical" href="http://localhost:1313/posts/securingmicrosoftfoundrywithbyovnet/">
  
  
  
  
  
  
  
  
  
  
    
    
  
  
  <link
    type="text/css"
    rel="stylesheet"
    href="/css/main.bundle.min.afab685e008c80aa5a809b6f1f3a10a27eb8d43957e3e5f40b21674effab9a73b2b62c010633276f762d3385f380bbfed6076bb087fb847764c46cf21a17c1d9.css"
    integrity="sha512-r6toXgCMgKpagJtvHzoQon641DlX4&#43;X0CyFnTv&#43;rmnOytiwBBjMnb3YtM4XzgLv&#43;1gdrsIf7hHdkxGzyGhfB2Q==">

  
  
  <script
    type="text/javascript"
    src="/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js"
    integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj&#43;e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script>
  
  
    
    
    
  
  
  
  
  
  
  
  
  
  
    
    <script
      defer
      type="text/javascript"
      id="script-bundle"
      src="/js/main.bundle.min.a187118b41a60744310065c567365de85730c8495301d0ebae41810cc6f7a47432b1de7d4f3b11338959f1ac50c266be6b4b73acf6bf770016eb59b602cc1aa0.js"
      integrity="sha512-oYcRi0GmB0QxAGXFZzZd6FcwyElTAdDrrkGBDMb3pHQysd59TzsRM4lZ8axQwma&#43;a0tzrPa/dwAW61m2AswaoA=="
      data-copy="Copy"
      data-copied="Copied"></script>
  
  
    
    <script src="/lib/zoom/zoom.min.umd.a527109b68c082a70f3697716dd72a9d5aa8b545cf800cecbbc7399f2ca6f6e0ce3e431f2062b48bbfa47c9ea42822714060bef309be073f49b9c0e30d318d7b.js" integrity="sha512-pScQm2jAgqcPNpdxbdcqnVqotUXPgAzsu8c5nyym9uDOPkMfIGK0i7&#43;kfJ6kKCJxQGC&#43;8wm&#43;Bz9JucDjDTGNew=="></script>
  

  
  
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
  

  
  
  
  
  
  

  
  <meta property="og:url" content="http://localhost:1313/posts/securingmicrosoftfoundrywithbyovnet/">
  <meta property="og:site_name" content="Cloud & AI Platforms Blog">
  <meta property="og:title" content="Securing Microsoft Foundry with Bring Your Own VNET">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-12-07T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-12-07T00:00:00+00:00">

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Securing Microsoft Foundry with Bring Your Own VNET">

  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "Posts",
    "name": "Securing Microsoft Foundry with Bring Your Own VNET",
    "headline": "Securing Microsoft Foundry with Bring Your Own VNET",
    
    
    "inLanguage": "en",
    "url" : "http:\/\/localhost:1313\/posts\/securingmicrosoftfoundrywithbyovnet\/",
    "author" : {
      "@type": "Person",
      "name": "Nirmal Thewarathanthri"
    },
    "copyrightYear": "2025",
    "dateCreated": "2025-12-07T00:00:00\u002b00:00",
    "datePublished": "2025-12-07T00:00:00\u002b00:00",
    
    "dateModified": "2025-12-07T00:00:00\u002b00:00",
    
    
    
    "mainEntityOfPage": "true",
    "wordCount": "1032"
  }]
  </script>



  
  
    <meta name="author" content="Nirmal Thewarathanthri">
  
  
    
      
        
      
    
      
        
          <link href="https://github.com/nthewara" rel="me">
        
      
    
      
        
          <link href="https://linkedin.com/in/nirmalmt" rel="me">
        
      
    
      
        
          <link href="https://twitter.com/nirmalmt" rel="me">
        
      
    
  

  
  

<script src="/lib/jquery/jquery.slim.min.b0dca576e87d7eaa5850ae4e61759c065786cdb6489d68fcc82240539eebd5da522bdb4fda085ffd245808c8fe2acb2516408eb774ef26b5f6015fc6737c0ea8.js" integrity="sha512-sNylduh9fqpYUK5OYXWcBleGzbZInWj8yCJAU57r1dpSK9tP2ghf/SRYCMj&#43;KsslFkCOt3TvJrX2AV/Gc3wOqA=="></script>























  
  





  
  

  
  

  
  

  
  
</head>
<body
    class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32 scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600">
    <div id="the-top" class="absolute flex self-center">
      <a
        class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600"
        href="#main-content">
        <span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>
        Skip to main content
      </a>
    </div>
    
    
      













<div
  class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start gap-x-3 pt-[2px] pr-0 pb-[3px] pl-0">
  
  

  <div class="flex flex-1 items-center justify-between">
    <nav class="flex space-x-3">
      
        <a href="/" class="text-base font-medium text-gray-500 hover:text-gray-900">
          Cloud &amp; AI Platforms Blog
        </a>
      
    </nav>
    
  <nav class="hidden md:flex items-center gap-x-5 md:ml-12 h-12">
    
      
        
  <a
  href="/posts/"
  
  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
  
  <p class="text-base font-medium" title="Posts">
    Blog
  </p>
</a>



      
    

    

    

    
      <button
        id="search-button"
        aria-label="Search"
        class="text-base hover:text-primary-600 dark:hover:text-primary-400"
        title="Search (/)">
        <span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
      </button>
    

    
      <div class=" flex items-center">
        <button
          id="appearance-switcher"
          aria-label="Dark mode switcher"
          type="button"
          class="text-base hover:text-primary-600 dark:hover:text-primary-400">
          <div class="flex items-center justify-center dark:hidden">
            <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>
</span>
          </div>
          <div class="items-center justify-center hidden dark:flex">
            <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>
</span>
          </div>
        </button>
      </div>
    
  </nav>

    
  <div class="flex md:hidden items-center gap-x-5 md:ml-12 h-12">
    <span></span>

    

    

    
      <button
        id="search-button-mobile"
        aria-label="Search"
        class="text-base hover:text-primary-600 dark:hover:text-primary-400"
        title="Search (/)">
        <span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
      </button>
    

    
      <button
        id="appearance-switcher-mobile"
        aria-label="Dark mode switcher"
        type="button"
        class="text-base hover:text-primary-600 dark:hover:text-primary-400 ltr:mr-1 rtl:ml-1">
        <div class="flex items-center justify-center dark:hidden">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>
</span>
        </div>
        <div class="items-center justify-center hidden dark:flex">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>
</span>
        </div>
      </button>
    
  </div>

  </div>
  
  <div class="-my-2 md:hidden">
    <div id="menu-button" class="block">
      
        <div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"/></svg>
</span>
        </div>
        <div
          id="menu-wrapper"
          class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50 pt-[5px]">
          <ul
            class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl">
            <li id="menu-close-button">
              <span
                class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400">
                <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>
</span>
              </span>
            </li>

            
              
  <li class="mt-1">
  <a
    href="/posts/"
    
    class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
    <p class="text-bg font-bg" title="Posts">
      Blog
    </p>
  </a>
</li>



            

          </ul>
          
        </div>
      
    </div>
  </div>

</div>





    
    <div class="relative flex flex-col grow">
      <main id="main-content" class="grow">
        
  
  <article>
    
    

    
    <header id="single_header" class="mt-5 max-w-prose">
      
      <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
        Securing Microsoft Foundry with Bring Your Own VNET
      </h1>
      <div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
        





  
  



  

  
  
  

  
  
    
  

  
    
  

  

  
    
  

  
    
  

  

  

  

  

  


  <div class="flex flex-row flex-wrap items-center">
    
    
      <time datetime="2025-12-07T00:00:00&#43;00:00">2025-12-07</time><span class="px-2 text-primary-500">&middot;</span><span>1032 words</span><span class="px-2 text-primary-500">&middot;</span><span title="Reading time">5 mins</span>
    

    
    
      <span class="pl-2"><span class="flex cursor-pointer">
  <span
    class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    Draft
  </span>
</span>
</span>
    
  </div>

  

  
  

  
  



      </div>
      
    </header>

    
    <section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">
      
      
      
      
      


      <div class="min-w-0 min-h-0 max-w-fit">
        

        <div class="article-content max-w-prose mb-20">
          <p>






<figure>
      <img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="low"
    alt="alt"
    srcset="
      /posts/securingmicrosoftfoundrywithbyovnet/20251207080909_hu_8928fa3657694979.png  330w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251207080909_hu_4d4ec575f21b7ece.png  660w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251207080909_hu_58fe08595de5182f.png 1280w
    "
    data-zoom-src="/posts/securingmicrosoftfoundrywithbyovnet/20251207080909.png"
    src="/posts/securingmicrosoftfoundrywithbyovnet/20251207080909.png">

  
</figure>
</p>

<h2 class="relative group">Introduction 
    <div id="introduction" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100 select-none">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href="#introduction" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>Microsoft Foundry (Previously called AI Foundry) provides powerful capabilities for building and deploying AI agents and solutions. For enterprise customers, securing these deployments within their own network infrastructure is critical for compliance, governance, and integration with existing landing zones. The Bring Your Own (BYO) VNET deployment pattern enables organizations to secure and control both inbound and outbound access to Foundry Agent services while maintaining network isolation.
In this blog post, I&rsquo;m sharing lessons learned from a recent Microsoft Foundry Agent Service deployment utilizing the BYO VNET pattern. This approach is particularly valuable for organizations that need to:</p>
<ul>
<li>Integrate AI Foundry with existing hub-and-spoke network architectures</li>
<li>Enforce strict network security policies</li>
<li>Maintain compliance with regulatory requirements</li>
<li>Control data flow and access patterns</li>
</ul>

<h3 class="relative group">Understanding AI Foundry Versions 
    <div id="understanding-ai-foundry-versions" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100 select-none">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href="#understanding-ai-foundry-versions" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>It&rsquo;s important to note that there are multiple versions of Azure AI Foundry in the documentation. This blog focuses on <strong>Azure AI Foundry Classic</strong> Service. For a detailed explanation of the differences between Hub based and Projectbased Foundry experiences, refer to <a
  href="link">this blog</a>.</p>

<h2 class="relative group">Security Architecture Overview 
    <div id="security-architecture-overview" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100 select-none">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href="#security-architecture-overview" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>When deploying AI Foundry using the BYO VNET approach, there are three critical security layers to configure:</p>
<ol>
<li><strong>Individual Resource Configuration</strong> - Network access settings for each Azure resource</li>
<li><strong>Network Security Groups (NSGs)</strong> - Subnet level traffic filtering for the delegated AI Foundry subnet</li>
<li><strong>Azure Firewall Configuration</strong> - Centralised outbound access control</li>
</ol>

<h2 class="relative group">Prerequisites 
    <div id="prerequisites" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100 select-none">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href="#prerequisites" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>Before deploying AI Foundry with BYO VNET, ensure you have:</p>
<ul>
<li>An existing VNET with available address space for dedicated subnets</li>
<li>Azure Firewall or equivalent network virtual appliance</li>
<li>Appropriate Azure RBAC permissions to create resources and configure networking</li>
<li>Understanding of your organization&rsquo;s network architecture and security requirements</li>
</ul>

<h3 class="relative group">Deployment 
    <div id="deployment" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100 select-none">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href="#deployment" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>Foundry team has published templates for both <a
  href="https://github.com/azure-ai-foundry/foundry-samples/tree/main/infrastructure/infrastructure-setup-bicep/15-private-network-standard-agent-setup"
    target="_blank"
  >Bicep</a> and <a
  href="https://github.com/azure-ai-foundry/foundry-samples/tree/main/infrastructure/infrastructure-setup-terraform/15b-private-network-standard-agent-setup-byovnet"
    target="_blank"
  >Terraform</a> that can be used for creating Foundry deployment using customer owned VNET. This deployment template requires below resources for a successful deployment</p>
<p><strong>1. Agent Subnet with Delegation</strong></p>
<ul>
<li>Recommended minimum size: /26 or larger depending on scale requirements</li>
<li>Agent subnet delegated to Foundry with Subnet delegating using &ldquo;Microsoft.App/environments&rdquo; as below







<figure>
      <img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="low"
    alt="20251204054834"
    srcset="
      /posts/securingmicrosoftfoundrywithbyovnet/20251204054834_hu_5689660784ada0b8.png  330w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251204054834_hu_c5c444d94738343e.png  660w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251204054834_hu_fa3915bcaae292bd.png 1280w
    "
    data-zoom-src="/posts/securingmicrosoftfoundrywithbyovnet/20251204054834.png"
    src="/posts/securingmicrosoftfoundrywithbyovnet/20251204054834.png">

  
</figure>
</li>
</ul>
<p><strong>2. Private Endpoints Subnet</strong></p>
<ul>
<li>Dedicated subnet for hosting private endpoints to AI Foundry resources</li>
<li>No delegation required</li>
<li>Recommended size: /27 or larger</li>
</ul>

<h3 class="relative group">Required Private DNS Zones 
    <div id="required-private-dns-zones" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100 select-none">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href="#required-private-dns-zones" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>AI Foundry Agent Service must be able to resolve private endpoints. This can be achieved by either:</p>
<ul>
<li>Directly linking Private DNS zones to your VNETs, or</li>
<li>Using custom DNS configuration on the VNET pointing to Azure Private DNS Resolver or other DNS resolver service</li>
</ul>
<p><strong>Required DNS zones:</strong></p>
<ul>
<li><code>privatelink.blob.core.windows.net</code></li>
<li><code>privatelink.cognitiveservices.azure.com</code></li>
<li><code>privatelink.documents.azure.com</code></li>
<li><code>privatelink.openai.azure.com</code></li>
<li><code>privatelink.search.windows.net</code></li>
<li><code>privatelink.services.ai.azure.com</code></li>
<li><code>privatelink.file.core.windows.net</code></li>
</ul>

<h3 class="relative group">Network Security Group Configuration 
    <div id="network-security-group-configuration" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100 select-none">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href="#network-security-group-configuration" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>NSG configuration is critical for controlling outbound access from the AI Foundry delegated agent subnet. The following outbound rules represent the minimum required configuration:</p>

<h3 class="relative group">NSG Rules 
    <div id="nsg-rules" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100 select-none">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href="#nsg-rules" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p><strong>1. Azure Active Directory (Required)</strong></p>
<ul>
<li>Service Tag: <code>AzureActiveDirectory</code></li>
<li>Required for identity access</li>
<li>Port: 443 (HTTPS)</li>
</ul>
<p><strong>2. Container Apps Management</strong></p>
<ul>
<li>Service Tag: <code>AzureContainerAppsManagement</code></li>
<li>Required for Container Apps platform management</li>
<li>Port: 443</li>
</ul>
<p><strong>3. Container Registry</strong></p>
<ul>
<li>Service Tag: <code>AzureContainerRegistry</code></li>
<li>Required for pulling container images</li>
<li>Port: 443</li>
</ul>
<p><strong>4. Container Apps Internal Communication</strong></p>
<ul>
<li>Destination: - 100.100.0.0/17, 100.100.128.0/19,100.100.160.0/19,100.100.192.0/19</li>
<li>Container Apps uses this range for internal platform communication</li>
<li>Ports: Any







<figure>
      <img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="low"
    alt="20251206134928"
    srcset="
      /posts/securingmicrosoftfoundrywithbyovnet/20251206134928_hu_de4072fc1a4546eb.png  330w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206134928_hu_5c7d5662962ff6df.png  660w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206134928_hu_f8bcb8ec390f23b1.png 1280w
    "
    data-zoom-src="/posts/securingmicrosoftfoundrywithbyovnet/20251206134928.png"
    src="/posts/securingmicrosoftfoundrywithbyovnet/20251206134928.png">

  
</figure>
</li>
</ul>

<h3 class="relative group">Azure Firewall Configuration 
    <div id="azure-firewall-configuration" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100 select-none">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href="#azure-firewall-configuration" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>Azure Firewall provides centralized control over outbound traffic from the AI Foundry environment. The firewall processes rules in the following order:</p>
<ol>
<li><strong>Network Rules</strong> - Processed first</li>
<li><strong>Application Rules</strong> - Processed if no network rule match</li>
</ol>

<h3 class="relative group">Network Rules Configuration 
    <div id="network-rules-configuration" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100 select-none">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href="#network-rules-configuration" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>Configure network rules to allow traffic to Azure service tags:</p>
<ul>
<li><code>AzureActiveDirectory</code> - Port 443</li>
<li><code>InternalACATraffic</code>
<strong>Key Configuration Note:</strong> Create an IP Group containing the Container Apps internal IP ranges (100.64.0.0/10, 100.100.0.0/17, 100.100.128.0/19, 100.100.160.0/19, 100.100.192.0/19) to use as source addresses in firewall rules.</li>
</ul>
<p>






<figure>
      <img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="low"
    alt="20251206143806"
    srcset="
      /posts/securingmicrosoftfoundrywithbyovnet/20251206143806_hu_7da5287725942a1.png  330w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206143806_hu_6c9bbd5ae0f13ff9.png  660w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206143806_hu_b431d9ec30cd2755.png 1280w
    "
    data-zoom-src="/posts/securingmicrosoftfoundrywithbyovnet/20251206143806.png"
    src="/posts/securingmicrosoftfoundrywithbyovnet/20251206143806.png">

  
</figure>
</p>
<p>






<figure>
      <img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="low"
    alt="20251206143750"
    srcset="
      /posts/securingmicrosoftfoundrywithbyovnet/20251206143750_hu_f6b0890723bbcbfa.png  330w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206143750_hu_ff3db8251610db58.png  660w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206143750_hu_fa43983584ad17cf.png 1280w
    "
    data-zoom-src="/posts/securingmicrosoftfoundrywithbyovnet/20251206143750.png"
    src="/posts/securingmicrosoftfoundrywithbyovnet/20251206143750.png">

  
</figure>
</p>

<h3 class="relative group">Application Rules Configuration 
    <div id="application-rules-configuration" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100 select-none">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href="#application-rules-configuration" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>Application rules provide FQDN-based filtering for outbound HTTPS traffic to specific domains required by AI Foundry services.</p>
<p>






<figure>
      <img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="low"
    alt="20251206163443"
    srcset="
      /posts/securingmicrosoftfoundrywithbyovnet/20251206163443_hu_b93ed53e45031264.png  330w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206163443_hu_be40c73a942bf768.png  660w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206163443_hu_619d9bb1effd2bf8.png 1280w
    "
    data-zoom-src="/posts/securingmicrosoftfoundrywithbyovnet/20251206163443.png"
    src="/posts/securingmicrosoftfoundrywithbyovnet/20251206163443.png">

  
</figure>
</p>

<h3 class="relative group">Resource Configuration 
    <div id="resource-configuration" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100 select-none">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href="#resource-configuration" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>All AI Foundry project resources should be configured with network security in mind and with disabled public access.</p>
<p>AI Foundry resource network configuration below







<figure>
      <img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="low"
    alt="20251206172829"
    srcset="
      /posts/securingmicrosoftfoundrywithbyovnet/20251206172829_hu_838ce36c9fbead3b.png  330w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206172829_hu_b2c72d7bf8193696.png  660w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206172829_hu_9795bf2dfbf19be9.png 1280w
    "
    data-zoom-src="/posts/securingmicrosoftfoundrywithbyovnet/20251206172829.png"
    src="/posts/securingmicrosoftfoundrywithbyovnet/20251206172829.png">

  
</figure>

Delegated subnet configuration







<figure>
      <img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="low"
    alt="20251206172848"
    srcset="
      /posts/securingmicrosoftfoundrywithbyovnet/20251206172848_hu_352907cc9cce49f8.png  330w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206172848_hu_1c455372b4cf2516.png  660w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206172848_hu_e33aeae5176aa2c6.png 1280w
    "
    data-zoom-src="/posts/securingmicrosoftfoundrywithbyovnet/20251206172848.png"
    src="/posts/securingmicrosoftfoundrywithbyovnet/20251206172848.png">

  
</figure>

Cosmos DB Network configuration - Disabled Public Access







<figure>
      <img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="low"
    alt="20251206172920"
    srcset="
      /posts/securingmicrosoftfoundrywithbyovnet/20251206172920_hu_54e5034995b50621.png  330w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206172920_hu_eb6fcb7481296f3f.png  660w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206172920_hu_9a21c5b55c4cb559.png 1280w
    "
    data-zoom-src="/posts/securingmicrosoftfoundrywithbyovnet/20251206172920.png"
    src="/posts/securingmicrosoftfoundrywithbyovnet/20251206172920.png">

  
</figure>

AI Search Network configuration - Disabled Public Access







<figure>
      <img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="low"
    alt="20251206172943"
    srcset="
      /posts/securingmicrosoftfoundrywithbyovnet/20251206172943_hu_8c789e1167e3ba0c.png  330w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206172943_hu_4178df936a19b882.png  660w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206172943_hu_6a0bd83dce883d96.png 1280w
    "
    data-zoom-src="/posts/securingmicrosoftfoundrywithbyovnet/20251206172943.png"
    src="/posts/securingmicrosoftfoundrywithbyovnet/20251206172943.png">

  
</figure>

Azure Storage Network configuration - Disabled Public Access







<figure>
      <img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="low"
    alt="20251206173023"
    srcset="
      /posts/securingmicrosoftfoundrywithbyovnet/20251206173023_hu_b053aab5722d7578.png  330w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206173023_hu_62369c34bc9b7932.png  660w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206173023_hu_85778c4ff6e2c9b8.png 1280w
    "
    data-zoom-src="/posts/securingmicrosoftfoundrywithbyovnet/20251206173023.png"
    src="/posts/securingmicrosoftfoundrywithbyovnet/20251206173023.png">

  
</figure>
</p>

<h3 class="relative group">Foundry Agent Validation 
    <div id="foundry-agent-validation" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100 select-none">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href="#foundry-agent-validation" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>After deployment, validate that the AI Foundry Agent service functions correctly:</p>
<p>






<figure>
      <img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="low"
    alt="20251206163823"
    srcset="
      /posts/securingmicrosoftfoundrywithbyovnet/20251206163823_hu_87b31e40ec611fba.png  330w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206163823_hu_74dc79430564cdac.png  660w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206163823_hu_704410ab18a89ee1.png 1280w
    "
    data-zoom-src="/posts/securingmicrosoftfoundrywithbyovnet/20251206163823.png"
    src="/posts/securingmicrosoftfoundrywithbyovnet/20251206163823.png">

  
</figure>
</p>

<h3 class="relative group">1. Create a New Agent 
    <div id="1-create-a-new-agent" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100 select-none">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href="#1-create-a-new-agent" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>Use the AI Foundry Portal to create and configure a new agent. Successful agent creation indicates proper network connectivity and resource access.</p>
<p>![[Pasted image 20251206165637.png | 500]]</p>

<h3 class="relative group">2. Upload Knowledge Files 
    <div id="2-upload-knowledge-files" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100 select-none">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href="#2-upload-knowledge-files" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>Test file upload functionality, which demonstrates:</p>
<ul>
<li>Azure Storage connectivity via private endpoint</li>
<li>AI Search integration for vector database population</li>
<li>Authentication through Entra ID







<figure>
      <img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="low"
    alt="20251206165735"
    srcset="
      /posts/securingmicrosoftfoundrywithbyovnet/20251206165735_hu_596104123e2db135.png  330w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206165735_hu_afc974e9d81086ec.png  660w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206165735_hu_9e40dfc775d96434.png 1280w
    "
    data-zoom-src="/posts/securingmicrosoftfoundrywithbyovnet/20251206165735.png"
    src="/posts/securingmicrosoftfoundrywithbyovnet/20251206165735.png">

  
</figure>
</li>
</ul>

<h3 class="relative group">3. Test Chat Playground 
    <div id="3-test-chat-playground" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100 select-none">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href="#3-test-chat-playground" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>Validate agent responses using the chat playground. This tests:</p>
<ul>
<li>End-to-end agent functionality</li>
<li>Knowledge retrieval from vector store</li>
<li>OpenAI service connectivity







<figure>
      <img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="low"
    alt="20251206172131"
    srcset="
      /posts/securingmicrosoftfoundrywithbyovnet/20251206172131_hu_96d440bf10f49349.png  330w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206172131_hu_85ea2138eab7edf6.png  660w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206172131_hu_be08a4b686bb2b64.png 1280w
    "
    data-zoom-src="/posts/securingmicrosoftfoundrywithbyovnet/20251206172131.png"
    src="/posts/securingmicrosoftfoundrywithbyovnet/20251206172131.png">

  
</figure>

Thread logs functionality to trace requests







<figure>
      <img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="low"
    alt="20251206171540"
    srcset="
      /posts/securingmicrosoftfoundrywithbyovnet/20251206171540_hu_d563708d66d22648.png  330w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206171540_hu_81bca1c97b5abeb.png  660w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206171540_hu_6c48313c1db88db2.png 1280w
    "
    data-zoom-src="/posts/securingmicrosoftfoundrywithbyovnet/20251206171540.png"
    src="/posts/securingmicrosoftfoundrywithbyovnet/20251206171540.png">

  
</figure>
</li>
</ul>
<p>This is another example where we are asking a relevant question with the knowledge provided (Microsoft annual report 2025). We get expected response with reference to uploaded content.</p>
<p>






<figure>
      <img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="low"
    alt="20251206172131"
    srcset="
      /posts/securingmicrosoftfoundrywithbyovnet/20251206172131_hu_96d440bf10f49349.png  330w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206172131_hu_85ea2138eab7edf6.png  660w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206172131_hu_be08a4b686bb2b64.png 1280w
    "
    data-zoom-src="/posts/securingmicrosoftfoundrywithbyovnet/20251206172131.png"
    src="/posts/securingmicrosoftfoundrywithbyovnet/20251206172131.png">

  
</figure>
</p>

<h3 class="relative group">4. Review Thread Logs 
    <div id="4-review-thread-logs" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100 select-none">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href="#4-review-thread-logs" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>Use the built-in thread logs functionality to:</p>
<ul>
<li>Observe tool calls against the vector store</li>
<li>Validate response generation</li>
<li>Troubleshoot any issues with agent behavior







<figure>
      <img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="low"
    alt="20251206172202"
    srcset="
      /posts/securingmicrosoftfoundrywithbyovnet/20251206172202_hu_c7fdab9585921b0c.png  330w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206172202_hu_ac4e44c4533df2bc.png  660w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206172202_hu_c1eafce79022f1ba.png 1280w
    "
    data-zoom-src="/posts/securingmicrosoftfoundrywithbyovnet/20251206172202.png"
    src="/posts/securingmicrosoftfoundrywithbyovnet/20251206172202.png">

  
</figure>
</li>
</ul>

<h3 class="relative group">Observability 
    <div id="observability" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100 select-none">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href="#observability" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>Comprehensive observability is essential for operating AI Foundry in production. Enable diagnostic logging across all components to gain visibility into traffic flows and request patterns.</p>

<h4 class="relative group">Observability - &gt; Firewall 
    <div id="observability----firewall" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100 select-none">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href="#observability----firewall" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>Having logs enabled on the firewall allows us to observe traffic flows from AI Foundry delegated subnet. Below is the behaviour. We can see communication from Foundry subnet, towards Microsoft Container Registry and towards Azure Container Apps endpoints.</p>
<p>Application Rule Logs below







<figure>
      <img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="low"
    alt="20251206144211"
    srcset="
      /posts/securingmicrosoftfoundrywithbyovnet/20251206144211_hu_fee2464353696bca.png  330w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206144211_hu_1e68d4ab3cd7909a.png  660w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206144211_hu_7f8cfef2f1d2708a.png 1280w
    "
    data-zoom-src="/posts/securingmicrosoftfoundrywithbyovnet/20251206144211.png"
    src="/posts/securingmicrosoftfoundrywithbyovnet/20251206144211.png">

  
</figure>
</p>
<p>Network Rule Logs below







<figure>
      <img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="low"
    alt="20251206144048"
    srcset="
      /posts/securingmicrosoftfoundrywithbyovnet/20251206144048_hu_2f7ee9910fd24969.png  330w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206144048_hu_f85eeec08aa967a6.png  660w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206144048_hu_8b340225519f3408.png 1280w
    "
    data-zoom-src="/posts/securingmicrosoftfoundrywithbyovnet/20251206144048.png"
    src="/posts/securingmicrosoftfoundrywithbyovnet/20251206144048.png">

  
</figure>
</p>

<h4 class="relative group">Observability -&gt; VNET Flow Logs 
    <div id="observability---vnet-flow-logs" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100 select-none">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href="#observability---vnet-flow-logs" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>Below are logs from the VNET hosting agents. We can observe ACA Traffic reaching Microsoft managed endpoinst







<figure>
      <img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="low"
    alt="20251206175211"
    srcset="
      /posts/securingmicrosoftfoundrywithbyovnet/20251206175211_hu_316a386f79a46a29.png  330w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206175211_hu_4d2a33ca6fa5e4f6.png  660w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251206175211_hu_6fb84dae24690ac2.png 1280w
    "
    data-zoom-src="/posts/securingmicrosoftfoundrywithbyovnet/20251206175211.png"
    src="/posts/securingmicrosoftfoundrywithbyovnet/20251206175211.png">

  
</figure>
</p>

<h4 class="relative group">Observability -&gt; AI Foundry Logs 
    <div id="observability---ai-foundry-logs" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100 select-none">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href="#observability---ai-foundry-logs" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>Foundry Logs also demonstrates requests from User towards Foundry Private Endpoints and other services reaching foundry service.







<figure>
      <img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="low"
    alt="20251204061350"
    srcset="
      /posts/securingmicrosoftfoundrywithbyovnet/20251204061350_hu_d6ba161f61d03923.png  330w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251204061350_hu_63e54d9da975d9ac.png  660w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251204061350_hu_2e2c1648951cfccb.png 1280w
    "
    data-zoom-src="/posts/securingmicrosoftfoundrywithbyovnet/20251204061350.png"
    src="/posts/securingmicrosoftfoundrywithbyovnet/20251204061350.png">

  
</figure>
</p>

<h4 class="relative group">Observability -&gt; CosmosDB Logs 
    <div id="observability---cosmosdb-logs" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100 select-none">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href="#observability---cosmosdb-logs" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>We are also able to see request logs from CosmosDB Logs showcasing request from Agent delegated Subnet.







<figure>
      <img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="low"
    alt="20251204061529"
    srcset="
      /posts/securingmicrosoftfoundrywithbyovnet/20251204061529_hu_1e697a7efe4470fb.png  330w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251204061529_hu_53c17ab91d6a3b90.png  660w,
      /posts/securingmicrosoftfoundrywithbyovnet/20251204061529_hu_7b61ce2f055e11a0.png 1280w
    "
    data-zoom-src="/posts/securingmicrosoftfoundrywithbyovnet/20251204061529.png"
    src="/posts/securingmicrosoftfoundrywithbyovnet/20251204061529.png">

  
</figure>
</p>

<h2 class="relative group">Conclusion 
    <div id="conclusion" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100 select-none">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href="#conclusion" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>Deploying Microsoft Foundry using the Bring Your Own VNET pattern provides enterprise grade security and network control for AI agent workloads. This blog post has demonstrated a comprehensive approach to securing Microsoft Foundry deployments through three critical layers: individual resource network configuration, subnet  NSG rules, and centralised Azure Firewall policies.</p>

          
          
          
        </div>
        
          
  
  
  
  
  
  

  

  
    
    
<div class="flex author">
  
    
    
      
    
    
      
        
      
      <img
        class="!mt-0 !mb-0 h-24 w-24 rounded-full ltr:mr-4 rtl:ml-4"
        width="96"
        height="96"
        alt="Nirmal Thewarathanthri"
        src="/nthewara_4375739755412870932_hu_5e9b52da6f155176.jpg">
    
  
  <div class="place-self-center">
    
      <div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">
        Author
      </div>
      <div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
        Nirmal Thewarathanthri
      </div>
    
    
    <div class="text-2xl sm:text-lg">
  <div class="flex flex-wrap text-neutral-400 dark:text-neutral-500">
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="mailto:nthewara@gmail.com"
          target="_blank"
          aria-label="Email"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1c-27.64 140.9 68.65 266.2 199.1 285.1c19.01 2.888 36.17-12.26 36.17-31.49l.0001-.6631c0-15.74-11.44-28.88-26.84-31.24c-84.35-12.98-149.2-86.13-149.2-174.2c0-102.9 88.61-185.5 193.4-175.4c91.54 8.869 158.6 91.25 158.6 183.2l0 16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98 .0036c-7.299 0-13.2 4.992-15.12 11.68c-24.85-12.15-54.24-16.38-86.06-5.106c-38.75 13.73-68.12 48.91-73.72 89.64c-9.483 69.01 43.81 128 110.9 128c26.44 0 50.43-9.544 69.59-24.88c24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3C495.1 107.1 361.2-9.332 207.8 20.73zM239.1 304.3c-26.47 0-48-21.56-48-48.05s21.53-48.05 48-48.05s48 21.56 48 48.05S266.5 304.3 239.1 304.3z"/></svg>
</span></span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://github.com/nthewara"
          target="_blank"
          aria-label="Github"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span></span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://linkedin.com/in/nirmalmt"
          target="_blank"
          aria-label="Linkedin"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
</span></span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://twitter.com/nirmalmt"
          target="_blank"
          aria-label="Twitter"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
</span></span></a
        >
      
    
  </div>

</div>
  </div>
</div>

  

  

  
    <div class="mb-10"></div>
  

        
        

        

        

      </div>

      
      
        
        
          
          
        
        
        
        <script
          type="text/javascript"
          src="/js/page.min.54b6f4371722649edbe871e431d8670d670878c22be8f36e229fe53cc9b786fe25a834def5e6de621f7a3e37b72bc8cd73839aa5ed907ed6cbd45cd3e1b0fa20.js"
          integrity="sha512-VLb0NxciZJ7b6HHkMdhnDWcIeMIr6PNuIp/lPMm3hv4lqDTe9ebeYh96Pje3K8jNc4Oape2QftbL1FzT4bD6IA=="
          data-oid="views_posts/SecuringMicrosoftFoundrywithBYOVNet/index.md"
          data-oid-likes="likes_posts/SecuringMicrosoftFoundrywithBYOVNet/index.md"></script>
      
    </section>

    
    <footer class="pt-8 max-w-prose print:hidden">
      
  
    
    
    
    <div class="pt-8">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600">
      <div class="flex justify-between pt-3">
        <span>
          
            <a class="flex group mr-3" href="/posts/azureextendedzonevwan/">
              <span
                class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400"
                >&larr;</span
              >
              <span
                class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400"
                >&rarr;</span
              >
              <span class="flex flex-col">
                <span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >Azure Extended Zone Connectivity to Virtual WAN</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2025-08-31T00:00:00&#43;00:00">2025-08-31</time>
                  
                </span>
              </span>
            </a>
          
        </span>
        <span>
          
        </span>
      </div>
    </div>
  


      
        
          <div class="pt-3">
            <hr class="border-dotted border-neutral-300 dark:border-neutral-600">
            <div class="pt-3">
              <script src="https://giscus.app/client.js"
                data-repo="nthewara/nthewara-blog"
                data-repo-id="R_kgDOPKsh5g"
                data-category="General"
                data-category-id="DIC_kwDOPKsh5s4Cs34e"
                data-mapping="pathname"
                data-strict="0"
                data-reactions-enabled="1"
                data-emit-metadata="0"
                data-input-position="bottom"
                data-theme="dark"
                data-lang="en"
                crossorigin="anonymous"
                async>
        </script>
            </div>
          </div>
        
      
    </footer>
  </article>

        <div id="top-scroller" class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0 z-10">
  <a
    href="#the-top"
    class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
    aria-label="Scroll to top"
    title="Scroll to top">
    &uarr;
  </a>
</div>

      </main><footer id="site-footer" class="py-10 print:hidden">
  
  
    
  
  <div class="flex items-center justify-between">
    
    
      <p class="text-sm text-neutral-500 dark:text-neutral-400">
          &copy;
          2025
          Nirmal Thewarathanthri
      </p>
    

    
    
      <p class="text-xs text-neutral-500 dark:text-neutral-400">
        
        
        Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
          href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
          href="https://blowfish.page/" target="_blank" rel="noopener noreferrer">Blowfish</a>
      </p>
    
  </div>
  
    <script>
      mediumZoom(document.querySelectorAll("img:not(.nozoom)"), {
        margin: 24,
        background: "rgba(0,0,0,0.5)",
        scrollOffset: 0,
      });
    </script>
  
  
  
  <script
    type="text/javascript"
    src="/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js"
    integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh&#43;sCQ0E53ghYrxgYqw&#43;0GCRyIEpA=="></script>
  
  
</footer>
<div
  id="search-wrapper"
  class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh] z-500"
  data-url="http://localhost:1313/">
  <div
    id="search-modal"
    class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800">
    <header class="relative z-10 flex items-center justify-between flex-none px-2">
      <form class="flex items-center flex-auto min-w-0">
        <div class="flex items-center justify-center w-8 h-8 text-neutral-400">
          <span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
        </div>
        <input
          type="search"
          id="search-query"
          class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent"
          placeholder="Search"
          tabindex="0">
      </form>
      <button
        id="close-search-button"
        class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
        title="Close (Esc)">
        <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>
</span>
      </button>
    </header>
    <section class="flex-auto px-2 overflow-auto">
      <ul id="search-results">
        
      </ul>
    </section>
  </div>
</div>

    </div>
  </body>
  
</html>
